if(typeof jQuery=="undefined"){throw new Error("El plugin carta_wp necesita la librería jQuery para funcionar.")}(function($){"use strict";var TJ_CartaWp=function(element,options,callback){this.element=null;this.options=null;this.zoomfull="\x3c!--  INICIO - Maquetación al pinchar sobre un item --\x3e\n"+'<div class="modal fade" id="cwpModal" tabindex="-1" aria-hidden="true">\n'+'   <div class="modal-dialog modal-dialog-centered p-3">\n'+'       <div class="modal-content cwp-zoom shadow-lg border-0">\n'+'           <div class="modal-header bg-dark text-white border-0">\n'+'               <h3 class="modal-title card-title cwp-title" ></h3>\n'+'               <button type="button" class="btn-lg btn-close btn-close-white bg-transparent align-self-start ms-4" aria-label="Close" data-bs-dismiss="modal" aria-label="Close"></button>\n'+"           </div>\n"+'           <div class="modal-body p-0 overflow-hidden cwp-img-zoom">\n'+"           </div>\n"+'           <div class="modal-footer justify-content-start">\n'+'               <p class="card-text text-secondary mb-2 cwp-description"></p>\n'+'               <div class="w-100 d-flex justify-content-between">\n'+'                   <h5 class="card-text cwp-price m-1 align-self-center"></h5>\n'+'                   <ul class="list-inline cwp-alergenos m-1">\n'+"                   </ul>\n"+"               </div>\n"+"           </div>\n"+"        </div>\n"+"       </div>\n"+"</div>\n"+"\x3c!--  FIN - Maquetación al pinchar sobre un item --\x3e";this.init(element,options,callback)};TJ_CartaWp.Defaults={filter:".cwp-categorias li",item:".seccion",animation:"none",callback:null};TJ_CartaWp.prototype.init=function(element,options,callback){this.$element=$(element);this.options=this.getOptions(options);this.filtro(this.options);$("body").prepend(this.zoomfull);this.zoom();this.$element.find(".seccion").addClass(this.options.item.replace(".",""));if(typeof callback=="function"){callback.call(this)}if(typeof this.options.callback=="function"){this.options.callback.call(this)}};TJ_CartaWp.prototype.getDefaults=function(){return TJ_CartaWp.Defaults};TJ_CartaWp.prototype.getOptions=function(options){return $.extend({},this.getDefaults(),options)};TJ_CartaWp.prototype.filtro=function(options){$(document).on("click",options.filter,function(){setTimeout(function(){$(".navbar-collapse").removeClass("show")},10);var $this=$(this);var filtro=$this.attr("data-filter");var $item=$(options.item);if(filtro==="todo"){$this.addClass("cwp-categoria-activa").siblings().removeClass("cwp-categoria-activa");$item.show()}else{if(!$this.hasClass("cwp-categoria-activa")){$this.addClass("cwp-categoria-activa").siblings().removeClass("cwp-categoria-activa");$item.hide(0,function(){$('[data-f *= "'+filtro+'"]').show()})}}})};TJ_CartaWp.prototype.zoom=function(){var $contenedor_zoom=$(".cwp-zoom");var $imagen_pricipal=$(".cwp-main-image");$(document).on("click",".cwp-single-container",function(){var $contenedor_pequeno=$(this);var $src=$contenedor_pequeno.find(".cwp-img-previa").attr("src-large");var $titulo=$contenedor_pequeno.find(".card-title").text();if($contenedor_pequeno.find(".read-more").length!=0){var $descripcion=$contenedor_pequeno.find(".show-string").text()+$contenedor_pequeno.find(".hide-string").text()}else{var $descripcion=$contenedor_pequeno.find(".cwp-description").text()}var $precio=$contenedor_pequeno.find(".cwp-price").text();var $alergenos=$contenedor_pequeno.find(".cwp-alerg-icon");var $alergenos_sin_icono=$contenedor_pequeno.find(".cwp-alerg-sin-icon");if(typeof $src!="undefined"){$(".modal-body").removeClass("d-none");$contenedor_zoom.find(".cwp-img-zoom").attr("style","background-image: url("+$src+")")}else if(typeof $src==="undefined"){$contenedor_zoom.find(".cwp-main-image").attr("src","");$(".modal-body").addClass("d-none")}$contenedor_zoom.find(".card-title").text($titulo);$contenedor_zoom.find(".cwp-description").text($descripcion);$contenedor_zoom.find(".cwp-price").text($precio);for(const $alergeno of $alergenos){$contenedor_zoom.find("ul.cwp-alergenos").append("<li class='list-inline-item'><img src="+$alergeno.currentSrc+" alt='"+$alergeno.alt+"'></li>")}for(const $alergeno_sin_icono of $alergenos_sin_icono){console.log($alergeno_sin_icono.innerText);$contenedor_zoom.find("ul.cwp-alergenos").append("<li class='list-inline-item my-1 badge bg-secondary'>"+$alergeno_sin_icono.innerText+"</li>")}});var cwpModalEl=document.getElementById("cwpModal");cwpModalEl.addEventListener("hidden.bs.modal",function(event){$contenedor_zoom.find("ul.cwp-alergenos").html("")})};$(document).ready(function(){var maxLength=30;$(".show-read-more").each(function(){var myStr=$(this).text();if($.trim(myStr).length>maxLength){var newStr=myStr.substring(0,maxLength);var removedStr=myStr.substring(maxLength,$.trim(myStr).length);$(this).empty().html("<span class='show-string'>"+newStr+"</span>");$(this).append('<span class="read-more text-danger"> ...más</span>');$(this).append('<span class="d-none hide-string">'+removedStr+"</span>")}})});var Plugin=function(options,callback){return this.each(function(){options=typeof options=="object"&&options;var data=new TJ_CartaWp(this,options,callback)})};var old=$.fn.filtro_cwp;$.fn.filtro_cwp=Plugin;$.fn.filtro_cwp.Constructor=TJ_CartaWp;$.fn.filtro_cwp.noConflict=function(){$.fn.filtro_cwp=old}})(jQuery);